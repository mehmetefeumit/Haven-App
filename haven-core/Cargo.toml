[package]
name = "haven-core"
version = "0.1.0"
edition = "2021"
description = "Core library for Haven - private family location sharing"
license = "MIT"

[lib]
crate-type = ["cdylib", "staticlib", "lib"]

[dependencies]
flutter_rust_bridge = "=2.11.1"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
geohash = "0.13"
chrono = { version = "0.4", features = ["serde"] }
base64 = "0.22"
thiserror = "2.0"

[dev-dependencies]

[lints.rust]
unsafe_code = "deny"

[lints.clippy]
all = "warn"
pedantic = "warn"
nursery = "warn"

[package.metadata.coverage.run]
# Exclude auto-generated flutter_rust_bridge code from coverage
exclude-files = ["src/frb_generated/"]

# Coverage Configuration
# Run coverage locally with:
#   cargo install cargo-llvm-cov  (one-time setup)
#   cargo llvm-cov --open         (run tests + view HTML report)
#   cargo llvm-cov --lcov         (generate lcov.info for CI/tools)
# CI enforces 95% minimum line coverage
